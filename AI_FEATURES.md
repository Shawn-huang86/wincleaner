# WinCleaner AI 智能分析功能

## 功能概述

WinCleaner 现已集成大模型AI功能，能够智能识别本地文件夹、文件和应用程序，提供更准确的清理建议，确保不会对用户使用电脑产生负面影响。

## 主要功能

### 1. AI 文件识别
- **智能分析**: 使用大模型分析文件路径、名称、大小、修改时间等信息
- **用途识别**: 准确识别文件的实际用途和重要性
- **安全评估**: 提供0-100的安全评分，评估删除风险
- **智能建议**: 基于AI分析结果提供具体的操作建议

### 2. AI 应用管理
- **应用重要性评估**: 分析已安装应用的重要性等级（critical/high/medium/low）
- **依赖关系分析**: 识别应用之间的依赖关系
- **使用频率预测**: 估算应用的使用频率
- **卸载风险评估**: 评估卸载应用对系统的影响程度
- **替代应用推荐**: 为可卸载的应用推荐替代方案

### 3. 增强的文件识别器
- **传统规则 + AI分析**: 结合传统规则引擎和AI分析的双重保障
- **置信度评估**: AI分析结果包含置信度评分
- **降级策略**: AI服务不可用时自动回退到传统规则
- **缓存机制**: 缓存AI分析结果，避免重复调用

## 支持的AI服务

### OpenAI GPT-4 (推荐)
- 模型选择: GPT-4, GPT-4 Turbo, GPT-3.5 Turbo
- 高准确性和稳定性
- 需要API密钥

### Claude (Anthropic)
- 计划支持，开发中

### 本地模型 (Ollama)
- 计划支持，开发中
- 无需API密钥，完全本地运行

## 使用方法

### 1. 配置AI服务
1. 点击设置按钮
2. 在设置面板中找到"AI智能分析"部分
3. 点击"配置AI服务"
4. 选择AI服务提供商（推荐OpenAI）
5. 输入API密钥
6. 选择模型（推荐GPT-4）
7. 点击"测试连接"验证配置
8. 保存配置

### 2. 启用AI分析
1. 在AI配置面板中开启"启用AI分析"开关
2. 配置完成后，扫描文件时会自动使用AI分析
3. 在结果表格中可以看到"AI分析"列显示分析结果

### 3. 使用应用管理器
1. 点击顶部的"应用管理"按钮
2. 系统会自动扫描已安装的应用程序
3. 查看AI分析结果，包括重要性、安全性等信息
4. 使用筛选功能查看推荐卸载的应用
5. 选择要卸载的应用（批量卸载功能开发中）

## AI分析结果说明

### 文件分析结果
- **置信度**: 0-100%，表示AI分析的可信程度
- **安全评分**: 0-100分，分数越高越安全
- **用途描述**: AI识别的文件主要用途
- **风险等级**: low/medium/high/critical
- **具体建议**: 针对该文件的操作建议

### 应用分析结果
- **重要性等级**: critical（关键）/high（重要）/medium（一般）/low（较低）
- **安全卸载**: 是否可以安全卸载
- **系统影响**: 卸载对系统的影响程度
- **使用频率**: 预估的使用频率
- **依赖关系**: 与其他应用的依赖关系
- **替代应用**: 推荐的替代应用

## 安全保障

### 1. 多重验证
- AI分析 + 传统规则双重验证
- 高风险文件会被标记并阻止删除
- 系统关键文件绝对不会被删除

### 2. 保守策略
- AI置信度低时采用保守策略
- 未知文件默认标记为谨慎处理
- 系统应用默认不推荐卸载

### 3. 数据安全
- API密钥安全存储在本地
- 不会上传敏感文件内容
- 仅发送文件元数据进行分析

## 性能优化

### 1. 批量处理
- 分批处理文件分析请求
- 避免API限制和超时

### 2. 缓存机制
- 缓存AI分析结果24小时
- 避免重复分析相同文件

### 3. 异步处理
- 后台异步执行AI分析
- 不阻塞用户界面操作

## 故障排除

### 1. AI服务连接失败
- 检查网络连接
- 验证API密钥是否正确
- 确认API服务是否可用

### 2. 分析结果不准确
- 检查AI服务配置
- 尝试使用不同的模型
- 报告问题以改进算法

### 3. 性能问题
- 减少批量分析的文件数量
- 清理过期缓存
- 检查系统资源使用情况

## 未来计划

### 1. 更多AI服务支持
- Claude (Anthropic)
- 本地模型 (Ollama)
- 国产大模型支持

### 2. 功能增强
- 文件内容深度分析
- 注册表项智能识别
- 系统优化建议

### 3. 用户体验优化
- 更直观的分析结果展示
- 自定义分析规则
- 学习用户偏好

## 技术架构

### 核心组件
- `AIService`: AI服务核心类
- `ApplicationManager`: 应用程序管理器
- `FileIdentifier`: 增强的文件识别器
- `AIConfigPanel`: AI配置面板

### 数据流
```
文件/应用信息 → AI分析服务 → 结构化结果 → 现有识别器 → 用户界面
```

### 错误处理
- 降级策略：AI服务不可用时回退到传统规则
- 缓存机制：避免重复调用
- 重试机制：网络错误时自动重试

---

通过集成AI功能，WinCleaner 现在能够提供更智能、更安全的文件清理体验，帮助用户更好地管理系统空间，同时确保系统稳定性和数据安全。
